{"code":"import { track, trigger } from './effect';\nimport { isArray, hasChange } from '@vue/shared';\nexport function ref(target) {\n    return createRef(target);\n}\nexport function shallowRef(target) {\n    return createRef(target, true);\n}\nclass RefImpl {\n    rawValue;\n    shallow;\n    __v_isRef = true;\n    _value;\n    constructor(rawValue, shallow) {\n        this.rawValue = rawValue;\n        this.shallow = shallow;\n        this._value = rawValue;\n    }\n    // 类的属性访问器\n    get value() {\n        track(this, \"get\" /* TrackOpTypes.GET */, 'value');\n        return this._value;\n    }\n    set value(newValue) {\n        if (hasChange(this._value, newValue)) {\n            let oldValue = this._value;\n            this._value = newValue;\n            trigger(this, \"set\" /* TriggerOpTypes.SET */, 'value', newValue, oldValue);\n        }\n    }\n}\nfunction createRef(rawValue, shallow = false) {\n    return new RefImpl(rawValue, shallow);\n}\nclass ObjectRefImpl {\n    target;\n    key;\n    __v_isRef = true;\n    constructor(target, key) {\n        this.target = target;\n        this.key = key;\n    }\n    get value() {\n        return this.target[this.key];\n    }\n    set value(newVal) {\n        this.target[this.key] = newVal;\n    }\n}\nexport function toRef(target, key) {\n    return new ObjectRefImpl(target, key);\n}\nexport function toRefs(target) {\n    let res = isArray(target) ? new Array(target.length) : {};\n    for (let key in target) {\n        res[key] = toRef(target, key);\n    }\n    return res;\n}\n//# sourceMappingURL=ref.js.map","references":["D:/own-demo/exercise/vue3-code/新建文件夹/vue3_code2/packages/reactivity/src/operations.ts","D:/own-demo/exercise/vue3-code/新建文件夹/vue3_code2/packages/reactivity/src/effect.ts","D:/own-demo/exercise/vue3-code/新建文件夹/vue3_code2/packages/shared/src/index.ts"],"map":"{\"version\":3,\"file\":\"ref.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/ref.ts\"],\"names\":[],\"mappings\":\"AACA,OAAO,EAAE,KAAK,EAAE,OAAO,EAAE,MAAM,UAAU,CAAA;AACzC,OAAO,EAAU,OAAO,EAA0B,SAAS,EAAE,MAAM,aAAa,CAAA;AAChF,MAAM,UAAU,GAAG,CAAC,MAAM;IACxB,OAAO,SAAS,CAAC,MAAM,CAAC,CAAA;AAC1B,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,MAAM;IAC/B,OAAO,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,CAAA;AAChC,CAAC;AACD,MAAM,OAAO;IAGQ;IAAiB;IAF7B,SAAS,GAAG,IAAI,CAAC;IACjB,MAAM,CAAA;IACb,YAAmB,QAAQ,EAAS,OAAO;QAAxB,aAAQ,GAAR,QAAQ,CAAA;QAAS,YAAO,GAAP,OAAO,CAAA;QACzC,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAA;IACxB,CAAC;IACD,UAAU;IACV,IAAI,KAAK;QACP,KAAK,CAAC,IAAI,gCAAoB,OAAO,CAAC,CAAA;QACtC,OAAO,IAAI,CAAC,MAAM,CAAA;IACpB,CAAC;IACD,IAAI,KAAK,CAAC,QAAQ;QAChB,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE;YACpC,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAA;YAC1B,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAA;YACtB,OAAO,CAAC,IAAI,kCAAqB,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAA;SAC9D;IACH,CAAC;CAEF;AAED,SAAS,SAAS,CAAC,QAAQ,EAAE,OAAO,GAAG,KAAK;IAC1C,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAA;AACvC,CAAC;AAED,MAAM,aAAa;IAEE;IAAe;IAD3B,SAAS,GAAG,IAAI,CAAC;IACxB,YAAmB,MAAM,EAAS,GAAG;QAAlB,WAAM,GAAN,MAAM,CAAA;QAAS,QAAG,GAAH,GAAG,CAAA;IACrC,CAAC;IACD,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IAC9B,CAAC;IACD,IAAI,KAAK,CAAC,MAAM;QACd,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,CAAA;IAChC,CAAC;CACF;AAED,MAAM,UAAU,KAAK,CAAC,MAAM,EAAE,GAAG;IAC/B,OAAO,IAAI,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;AACvC,CAAC;AAED,MAAM,UAAU,MAAM,CAAC,MAAM;IAC3B,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE,CAAA;IACzD,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;QACtB,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;KAC9B;IACD,OAAO,GAAG,CAAA;AACZ,CAAC\"}"}
