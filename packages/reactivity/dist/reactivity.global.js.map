{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandler.ts","../src/reactive.ts","../src/ref.ts","../src/computed.ts"],"sourcesContent":["export const isObject = (param) => typeof param === 'object' && param!='null'\r\n\r\nexport const extend = Object.assign\r\nexport const isArray = Array.isArray\r\nexport const isFunction = (val) => typeof val === 'function'\r\nexport const isString = (val) => typeof val === 'string'\r\nexport const isNumber = (val) => typeof val === 'number'\r\n\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty\r\nexport const hasOwn = (\r\n  val: object,\r\n  key: string | symbol\r\n): key is keyof typeof val => hasOwnProperty.call(val, key)\r\n \r\nexport const isIntegerKey = (key: unknown) =>\r\n  isString(key) &&\r\n  key !== 'NaN' &&\r\n  key[0] !== '-' &&\r\n  '' + parseInt(key as string, 10) === key\r\n\r\n  export const hasChange = (val,oldVal) => {\r\n    return val!=oldVal\r\n  }","import { isArray, isIntegerKey } from \"@vue/shared\";\r\nimport { TrackOpTypes, TriggerOpTypes } from './operations'\r\n\r\nexport function effect(fn, options: any = {}) {\r\n  const effect = createReactEffect(fn, options)\r\n\r\n  if (!options.lazy) {\r\n    effect()\r\n  }\r\n  return effect\r\n}\r\nlet uid = 0;\r\nlet activeEffect; // 保存当前的effect\r\nlet effectstack = []\r\nfunction createReactEffect(fn, options) {\r\n  const effect = function reactiveEffect() {\r\n    if (!effectstack.includes(effect)) { // 重复修改相同属性，状态合并\r\n      try {\r\n        effectstack.push(effect)\r\n        activeEffect = effect\r\n        return fn() // computed需要\r\n      } finally {\r\n        effectstack.pop()\r\n        activeEffect = effectstack[effectstack.length - 1]\r\n      }\r\n    }\r\n  }\r\n  effect.uid = uid++; // 区别不同effect\r\n  effect._isEffect = true // 区别effect是不是响应式的effect\r\n  effect.raw = fn; // 保存依赖回调\r\n  effect.options = options; // 保存传入属性\r\n  return effect\r\n}\r\n\r\nlet targetMap = new WeakMap()\r\nexport function track(target, type, key) {\r\n  // key activeEffect 一一对应\r\n  /**\r\n   * WeakMap(\r\n   * {\r\n   *    target: Map({\r\n   *      key: Set({ effect1, effect2 })\r\n   *    })\r\n   * }\r\n   * )\r\n   */\r\n\r\n  // { name : '' }\r\n  // 1）定义未使用 2）非响应式数据(访问state.age)\r\n  if (activeEffect === undefined) {\r\n    return\r\n  }\r\n  let depMap = targetMap.get(target)\r\n  if (!depMap) {\r\n    targetMap.set(target, (depMap = new Map))\r\n  }\r\n  let dep = depMap.get(key)\r\n  if (!dep) {\r\n    depMap.set(key, (dep = new Set))\r\n  }\r\n  if (!dep.has(activeEffect)) {\r\n    dep.add(activeEffect)\r\n  }\r\n  console.log(targetMap, 'targetMap')\r\n}\r\n\r\n/** effect可以树形结构，增加栈处理\r\n * 保存问题，activeEffect只保存了当前的\r\n * effect(()=>{ // effect1\r\n  //收集的 effect1\r\n    state .name\r\n    effect(()=> { //effect2\r\n      state.age//effect2\r\n    }) \r\n    state.age // effect1\r\n  })\r\n * \r\n */\r\n\r\nexport function trigger(target,type,key, value?, oldValue?) {\r\n  let depsMap = targetMap.get(target)\r\n  if (!depsMap) return; // 根据target找到对应依赖，找不到不更新\r\n  const effectSet = new Set()\r\n  const add = (effectAdd) => {\r\n    if (effectAdd) {\r\n      effectAdd.forEach(effect => effectSet.add(effect))\r\n    }\r\n  }\r\n  // 通过length属性，直接修改数组\r\n  if (key === 'length' && isArray(target)) {\r\n    const newLength = Number(value)\r\n    depsMap.forEach((dep, effectPro) => {\r\n      // state = { list: [1,2,3] }\r\n      \r\n      // 依赖使用①：state.list.length effectPro = 'length'\r\n      // state.list.length = 1\r\n\r\n      // 依赖使用②：state.list[2] effectPro = 2, 数组变短执行effect,获取到最新（undefined）\r\n      // state.list.length = 1 dep: 不同effectPro的依赖Set({]})\r\n      // 如果更改长度小于依赖收集索引，需要重新执行effect\r\n      if (effectPro === 'length' || effectPro>=newLength) {\r\n        add(dep)\r\n      }\r\n    })\r\n  } else { // 对象\r\n    if (key!=undefined) {\r\n      add(depsMap.get(key))\r\n    }\r\n    switch(type) {\r\n      case TriggerOpTypes.ADD: // 新增\r\n        if(isIntegerKey(key) && isArray(target)) {\r\n          add(depsMap.get('length'))\r\n        }\r\n        break;\r\n        case TriggerOpTypes.DELETE:\r\n          // if (!isArray(target)) {\r\n          //   deps.push(depsMap.get(ITERATE_KEY))\r\n          //   if (isMap(target)) {\r\n          //     deps.push(depsMap.get(MAP_KEY_ITERATE_KEY))\r\n          //   }\r\n          // }\r\n          break;\r\n          // ADD DEL SET ??\r\n    }\r\n  }\r\n  effectSet.forEach((effect:any) => {\r\n    if (effect.options.sch) {\r\n      effect.options.sch(effect) // _dirty = true, computed, 不会主动触发effect执行\r\n    } else {\r\n      effect()\r\n    }\r\n  })\r\n}","\r\n\r\nimport { hasOwn, isArray, isIntegerKey, isObject, hasChange } from '@vue/shared'\r\nimport {\r\n  reactive,\r\n  shallowReactive,\r\n  shallowReadonly,\r\n  readonly\r\n} from './reactive'\r\nimport { TrackOpTypes, TriggerOpTypes } from './operations'\r\nimport { track, trigger } from './effect'\r\n\r\nfunction createGetter (isReadOnly = false, shall = false) {\r\n  return function get(target, key, receiver) {\r\n    let res = Reflect.get(target, key, receiver)\r\n    if (!isReadOnly) {\r\n      // 收集依赖\r\n      track(target, TrackOpTypes.GET, key)\r\n    }\r\n    if (shall) { // 浅\r\n      return res\r\n    }\r\n    if (isObject(res)) { // 懒代理 { list: { name: 'wenji' }} 懒代理.list对象，\r\n      // 不使用数据，不取到.list,.list就不会生成proxy对象，懒代理\r\n      return isReadOnly ? readonly(res): reactive(res)\r\n    }\r\n    return res\r\n  }\r\n}\r\nfunction createSetter(shall = false) {\r\n  return function set(target, key, value, receiver) {\r\n    const oldValue = target[key] // 获取老值要在设置新值之前\r\n    let res = Reflect.set(target, key, value, receiver)\r\n    // 触发更新\r\n    // 1)数组或对象 2）添加值还是修改值\r\n    let hasKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key)\r\n    if (!hasKey) { // 新增\r\n      trigger(target, TriggerOpTypes.ADD,key, value)\r\n    } else { // 修改\r\n      if (hasChange(value, oldValue)) {\r\n        trigger(target, TriggerOpTypes.SET,key, value, oldValue)\r\n      }\r\n    }\r\n    return res\r\n  }\r\n}\r\nconst get = createGetter()\r\nconst shallowReactiveGet = createGetter(false, true)\r\nconst shallowReadonlyGet = createGetter(true, true)\r\nconst readonlyGet = createGetter(true, false)\r\n\r\nconst set = createSetter()\r\nconst shallowSet = createSetter(true)\r\nconst reactiveHandlers = {\r\n  get,\r\n  set\r\n}\r\nconst shallowReactiveHandlers = {\r\n  get: shallowReactiveGet,\r\n  set: shallowSet\r\n}\r\nconst shallowReadonlyHandlers = {\r\n  get: shallowReadonlyGet,\r\n  set: (target, key, value) => {\r\n    console.log(`set key on fail:${key}`)\r\n  }\r\n}\r\nconst readonlyHandlers = {\r\n  get: readonlyGet,\r\n  set: (target, key, value) => {\r\n    console.log(`set key on fail:${key}`)\r\n  }\r\n}\r\n\r\nexport { reactiveHandlers, shallowReactiveHandlers, shallowReadonlyHandlers, readonlyHandlers }","import { isObject } from '@vue/shared'\r\nimport { reactiveHandlers, shallowReactiveHandlers, shallowReadonlyHandlers, readonlyHandlers } from './baseHandler'\r\n\r\nconst reactiveMap = new WeakMap()\r\nconst readonlyMap = new WeakMap()\r\n\r\nfunction createReactiveObj(target,isReadOnly,baseHandlers) {\r\n  if (!isObject(target)) {\r\n    return target\r\n  }\r\n  const map = isReadOnly ? readonlyMap : reactiveMap\r\n  let targetProxy = map.get(target)\r\n  if (targetProxy) { // 优化， 避免重复访问属性，reactive调用，重复proxy\r\n    console.log(targetProxy, '触发了')\r\n    return targetProxy\r\n  }\r\n  const proxy = new Proxy(target, baseHandlers)\r\n  map.set(target, proxy)\r\n  return proxy\r\n}\r\nfunction reactive(target){\r\n  return createReactiveObj(target,false, reactiveHandlers)\r\n}\r\nfunction shallowReactive(target){\r\n  return createReactiveObj(target,false, shallowReactiveHandlers)\r\n}\r\nfunction shallowReadonly(target){\r\n  return createReactiveObj(target,false, shallowReadonlyHandlers)\r\n}\r\nfunction readonly(target){\r\n  return createReactiveObj(target,true, readonlyHandlers)\r\n}\r\n\r\nexport {\r\n  reactive,\r\n  shallowReactive,\r\n  shallowReadonly,\r\n  readonly\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { TrackOpTypes, TriggerOpTypes } from './operations'\r\nimport { track, trigger } from './effect'\r\nimport { hasOwn, isArray, isIntegerKey, isObject, hasChange } from '@vue/shared'\r\nexport function ref(target) {\r\n  return createRef(target)\r\n}\r\n\r\nexport function shallowRef(target) { // 浅的\r\n  return createRef(target, true)\r\n}\r\nclass RefImpl {\r\n  public __v_isRef = true;\r\n  public _value\r\n  constructor(public rawValue, public shallow) {\r\n    this._value = rawValue\r\n  }\r\n  // 类的属性访问器\r\n  get value() {\r\n    track(this, TrackOpTypes.GET, 'value')\r\n    return this._value\r\n  }\r\n  set value(newValue) {\r\n    if (hasChange(this._value, newValue)) {\r\n      let oldValue = this._value\r\n      this._value = newValue\r\n      trigger(this, TriggerOpTypes.SET,'value', newValue, oldValue)\r\n    }\r\n  }\r\n  // 响应式：收集依赖触发更新\r\n}\r\n\r\nfunction createRef(rawValue, shallow = false) {\r\n  return new RefImpl(rawValue, shallow)\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  public __v_isRef = true;\r\n  constructor(public target, public key) {\r\n  }\r\n  get value() {\r\n    return this.target[this.key]\r\n  }\r\n  set value(newVal) {\r\n    this.target[this.key] = newVal\r\n  }\r\n}\r\n\r\nexport function toRef(target, key) {\r\n  return new ObjectRefImpl(target, key)\r\n}\r\n\r\nexport function toRefs(target) {\r\n  let res = isArray(target) ? new Array(target.length) : {}\r\n  for (let key in target) {\r\n    res[key] = toRef(target, key)\r\n  }\r\n  return res\r\n}","import { isFunction } from \"@vue/shared\";\r\nimport  { effect } from './effect'\r\nexport function computed(getterOrOptions) {\r\n  // 1)getter函数 2）对象\r\n  let getter,setter;\r\n  if (isFunction(getterOrOptions)) {\r\n    getter = getterOrOptions;\r\n    setter = () => {\r\n      console.warn(`computed value muse be readonly`)\r\n    }\r\n  } else {\r\n    getter = getterOrOptions.get\r\n    setter = getterOrOptions.set\r\n  }\r\n  return new ComputedRefImpl(getter,setter)\r\n}\r\nclass ComputedRefImpl {\r\n  public _dirty = true; // 默认获取值时候执行\r\n  public _value;\r\n  public effect; // effect 依赖\r\n  constructor(getter,public setter) {\r\n    this.effect = effect(getter, { \r\n      lazy: true,\r\n      sch: () => { // 修改数据执行\r\n        if (!this._dirty) this._dirty = true;\r\n        console.log(this._dirty) \r\n      }\r\n    }) // 默认不执行\r\n  }\r\n  get value() {\r\n    console.log('get-value')\r\n    if (this._dirty) {\r\n      this._dirty = false // 缓存机制\r\n      return this.effect()\r\n    }\r\n  }\r\n  set value(newVal) {\r\n    this.setter(newVal)\r\n  }\r\n}"],"names":[],"mappings":"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"}